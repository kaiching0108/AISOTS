# AI 期貨交易系統配置

# Shioaji API 配置
shioaji:
  api_key: "YOUR_API_KEY"
  secret_key: "YOUR_SECRET_KEY"
  simulation: true  # 測試模式，實盤改為 false

# LLM 配置
llm:
  provider: "custom"           # openrouter, openai, anthropic, deepseek, custom
  api_key: ""                 # 自定義端點或本地端可設為空
  model: "llama3"             # 模型名稱
  temperature: 0.7
  max_tokens: 2000
  base_url: "http://localhost:11434/v1"  # Ollama 預設位址

# Telegram 通知配置
telegram:
  enabled: true
  bot_token: "YOUR_BOT_TOKEN"
  chat_id: "YOUR_CHAT_ID"

# 風控配置
risk:
  max_daily_loss: 50000          # 單日最大虧損 (元)
  max_position: 10               # 最大口數總和
  max_orders_per_minute: 5       # 每分鐘最大下單數
  enable_stop_loss: true         # 啟用停損
  enable_take_profit: true       # 啟用止盈

# 交易配置
trading:
  check_interval: 60             # 檢查間隔 (秒)
  trading_hours:
    day_start: "08:45"
    day_end: "13:45"
    night_start: "15:00"
    night_end: "05:00"

# 策略配置 - 3個策略
strategies:
  - id: "strategy_001"
    name: "台指突破策略"
    symbol: "TXF"              # 期貨代碼
    goal: 500                  # 目標：每日賺 500 元
    goal_unit: "daily"         # 目標單位: daily/weekly/monthly/quarterly/yearly
    prompt: |
      當台指期貨15分K突破當日高點時買進，
      跌破當日低點時賣出。
      停損50點，止盈100點。
    enabled: true
    params:
      timeframe: "15m"
      stop_loss: 50
      take_profit: 100
      position_size: 2

  - id: "strategy_002"
    name: "小台均值回歸"
    symbol: "MXF"
    goal: 3000                 # 目標：每週賺 3000 元
    goal_unit: "weekly"
    prompt: |
      當小台指價格偏離均線2%以上時順勢進場，
      價格回到均線時平倉。
      停損30點，止盈60點。
    enabled: true
    params:
      timeframe: "5m"
      stop_loss: 30
      take_profit: 60
      position_size: 1

  - id: "strategy_003"
    name: "電子期動量"
    symbol: "EFF"
    # 沒有 goal 欄位表示沒有設定目標
    prompt: |
      電子期1小時動量策略，
      連續3根陽線且成交量放大時買進。
      停損80點，止盈150點。
    enabled: false
    params:
      timeframe: "1h"
      stop_loss: 80
      take_profit: 150
      position_size: 1

# 日誌配置
logging:
  level: "INFO"
  file: "workspace/logs/trading.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# 自動 LLM Review 排程
# 說明：
# - enabled: 是否啟用自動 review
# - schedules: 排程列表
#   - strategy_id: 策略 ID
#   - period: 週期數字
#   - unit: 單位 (day/week/month/quarter/year)
# - 沒有設定 goal 的策略會跳過不觸發
# - 排程觸發每天最多 1 次，手動執行 review 不受限制
auto_review:
  enabled: false
  # schedules:
  #   - strategy_id: "strategy_001"
  #     period: 5
  #     unit: "day"      # 每 5 天觸發一次
  #   - strategy_id: "strategy_002"
  #     period: 2
  #     unit: "week"     # 每 2 週觸發一次
  #   - strategy_id: "strategy_003"
  #     period: 1
  #     unit: "month"    # 每月觸發一次
