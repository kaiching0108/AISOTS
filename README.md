# AI Self-Optimizing Trading System (AISOTS)

ä½¿ç”¨ Shioaji API çš„ AI é©…å‹•æœŸè²¨äº¤æ˜“ç³»çµ±ï¼Œæ”¯æ´ LLM ç­–ç•¥ç”Ÿæˆèˆ‡è‡ªæˆ‘å„ªåŒ–ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ¤– **AI ç­–ç•¥ç”Ÿæˆ** - ç”¨è‡ªç„¶èªè¨€æè¿°ç­–ç•¥ï¼ŒLLM è‡ªå‹•ç”Ÿæˆç¨‹å¼ç¢¼
- ğŸ¯ **ç›®æ¨™é©…å‹•ç­–ç•¥** - åªéœ€çµ¦å‡ºç›®æ¨™ï¼ˆå¦‚ã€Œæ¯æ—¥è³º500å…ƒã€ï¼‰ï¼ŒLLM è‡ªå‹•æ¨æ–·åƒæ•¸ä¸¦ç¢ºèªå¾Œå»ºç«‹
- ğŸ”’ **ç­–ç•¥é©—è­‰** - å»ºç«‹ç­–ç•¥æ™‚è‡ªå‹•åŸ·è¡Œå…©éšæ®µé©—è­‰ï¼ˆLLMå¯©æŸ¥ + æ­·å²Kæ£’å›æ¸¬ï¼‰
- ğŸ“ˆ **è‡ªæˆ‘å„ªåŒ–ç³»çµ±** - è¨­å®šç›®æ¨™ â†’ LLM è¨­è¨ˆç­–ç•¥ â†’ åŸ·è¡Œ â†’ ç¸¾æ•ˆåˆ†æ â†’ LLM å¯©æŸ¥å„ªåŒ– â†’ é”æˆç›®æ¨™
- ğŸ”” **Telegram Bot** - æ¥æ”¶å‘½ä»¤äº’å‹•ï¼Œä¸‹å–®ã€æˆäº¤ã€é¢¨æ§è­¦å‘Šå³æ™‚é€šçŸ¥
- ğŸ“Š **å¤šç¨® LLM æ”¯æ´** - Ollama, OpenAI, Anthropic, DeepSeek, OpenRouter
- ğŸ›¡ï¸ **é¢¨æ§æ©Ÿåˆ¶** - å–®æ—¥è™§æã€æœ€å¤§éƒ¨ä½ã€ä¸‹å–®é »ç‡é™åˆ¶
- ğŸ’¾ **è³‡æ–™æŒä¹…åŒ–** - JSON æ ¼å¼å„²å­˜ç­–ç•¥ã€éƒ¨ä½ã€è¨‚å–®ã€è¨Šè™Ÿ

## å®‰è£

```bash
git clone https://github.com/kaiching0108/AISOTS.git
cd AISOTS
pip install -r requirements.txt
```

## Telegram 
- Create a bot
  - Open Telegram, search @BotFather
  - Send /newbot, follow prompts
  - Copy the token

## Configè¨­å®š 

ç·¨è¼¯ `config.yaml`ï¼š

```yaml
shioaji:
  api_key: "YOUR_API_KEY"
  secret_key: "YOUR_SECRET_KEY"
  simulation: true  # æ¸¬è©¦æ¨¡å¼

llm:
  provider: "custom"
  base_url: "http://localhost:11434/v1"
  model: "llama3"

telegram:
  bot_token: "YOUR_BOT_TOKEN"
  chat_id: "YOUR_CHAT_ID"

strategies:
  - id: "strategy_001"
    name: "æ¯æ—¥æ”¶ç›Šç­–ç•¥"
    symbol: "TXF"
    goal: 500              # ç›®æ¨™ï¼šæ¯æ—¥è³º 500 å…ƒ
    goal_unit: "daily"    # ç›®æ¨™å–®ä½: daily/weekly/monthly/quarterly/yearly
    prompt: "RSI ä½æ–¼ 30 è²·å…¥ï¼Œé«˜æ–¼ 70 è³£å‡º"
    enabled: true
    params:
      timeframe: "15m"
      stop_loss: 50
      take_profit: 100
      position_size: 1
```

## ä½¿ç”¨æ–¹å¼

```bash
# ä¸€èˆ¬å•Ÿå‹•ï¼ˆéœ€è¦ Shioaji ç™»å…¥ï¼‰
python main.py

# æ¨¡æ“¬æ¨¡å¼ï¼ˆè·³é API ç™»å…¥ï¼Œç”¨æ–¼æ¸¬è©¦ï¼‰
python main.py --simulate
```

### å»ºç«‹ç­–ç•¥çš„å…©ç¨®æ–¹å¼ (by Telegram)

#### æ–¹å¼ä¸€ï¼šæ‰‹å‹•è¼¸å…¥å®Œæ•´åƒæ•¸
```
å»ºç«‹ç­–ç•¥ ID=my_rsi, åç¨±=RSIç­–ç•¥, ä»£ç¢¼=TXF, æè¿°=RSIä½æ–¼30è²·å…¥é«˜æ–¼70è³£å‡º, é€±æœŸ=15m, æ•¸é‡=1, åœæ=50, åœåˆ©=100
```

#### æ–¹å¼äºŒï¼šç›®æ¨™é©…å‹•ï¼ˆè‡ªå‹•æ¨æ–·åƒæ•¸ï¼‰
```
å¹«æˆ‘è¨­è¨ˆä¸€å€‹ RSI ç­–ç•¥
è¨­è¨ˆä¸€å€‹æ¯æ—¥è³º500å…ƒçš„ç­–ç•¥
```

LLM æœƒè‡ªå‹•æ¨æ–·åƒæ•¸ï¼Œå±•ç¤ºçµ¦ç”¨æˆ¶ç¢ºèªå¾Œå»ºç«‹ç­–ç•¥ã€‚

### Telegram å‘½ä»¤åˆ—è¡¨

#### åŸºæœ¬å‘½ä»¤
| æŒ‡ä»¤ | èªªæ˜ |
|------|------|
| status | ç³»çµ±ç‹€æ…‹ |
| positions | ç›®å‰éƒ¨ä½ |
| strategies | ç­–ç•¥åˆ—è¡¨ |
| performance | æ•´é«”ç•¶æ—¥ç¸¾æ•ˆ |
| risk | é¢¨æ§ç‹€æ…‹ |
| orders | è¨‚å–®æ­·å² |
| enable \<ID\> | å•Ÿç”¨ç­–ç•¥ |
| disable \<ID\> | åœç”¨ç­–ç•¥ |
| price \<symbol\> | æŸ¥è©¢å ±åƒ¹ |
| status \<ID\> | ç­–ç•¥ç‹€æ…‹ |

#### ç¸¾æ•ˆåˆ†æå‘½ä»¤
| æŒ‡ä»¤ | èªªæ˜ |
|------|------|
| performance \<ID\> | æŸ¥è©¢ç­–ç•¥å…¨éƒ¨æ­·å²ç¸¾æ•ˆ |
| performance \<ID\> today | æŸ¥è©¢ç­–ç•¥ä»Šæ—¥ç¸¾æ•ˆ |
| performance \<ID\> week | æŸ¥è©¢ç­–ç•¥æœ¬é€±ç¸¾æ•ˆ |
| performance \<ID\> month | æŸ¥è©¢ç­–ç•¥æœ¬æœˆç¸¾æ•ˆ |
| performance \<ID\> quarter | æŸ¥è©¢ç­–ç•¥æœ¬å­£ç¸¾æ•ˆ |
| performance \<ID\> year | æŸ¥è©¢ç­–ç•¥æœ¬å¹´ç¸¾æ•ˆ |

#### è‡ªæˆ‘å„ªåŒ–å‘½ä»¤
| æŒ‡ä»¤ | èªªæ˜ |
|------|------|
| goal \<ID\> \<é‡‘é¡\> \<å–®ä½\> | è¨­å®šç­–ç•¥ç›®æ¨™ |
| review \<ID\> | LLM å¯©æŸ¥ç­–ç•¥ä¸¦çµ¦å‡ºä¿®æ”¹å»ºè­° |
| optimize \<ID\> | åŸ·è¡Œå®Œæ•´å„ªåŒ–æµç¨‹ |
| confirm optimize | ç¢ºèªåŸ·è¡Œå„ªåŒ–ä¿®æ”¹ |

## è‡ªæˆ‘å„ªåŒ–ç³»çµ±

### ç³»çµ±é¡˜æ™¯

```
ç”¨æˆ¶è¼¸å…¥ç›®æ¨™ â†’ LLM è¨­è¨ˆç­–ç•¥ â†’ åŸ·è¡Œ â†’ ç¸¾æ•ˆåˆ†æ â†’ LLM å¯©æŸ¥å„ªåŒ– â†’ é”æˆç›®æ¨™
```

### ç›®æ¨™è¨­å®š

æ¯å€‹ç­–ç•¥å¯ä»¥è¨­å®šæ˜ç¢ºçš„æ•¸å€¼ç›®æ¨™ï¼š

| æ¬„ä½ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| goal | ç›®æ¨™æ•¸å€¼ï¼ˆå¿…é ˆç‚ºæ•¸å­—ï¼‰| 500 |
| goal_unit | ç›®æ¨™å–®ä½ | daily/weekly/monthly/quarterly/yearly |

### å®Œæ•´å„ªåŒ–æµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥ç›®æ¨™ï¼ˆå¦‚ã€Œæ¯æ—¥è³º500å…ƒã€ï¼‰
2. LLM è¨­è¨ˆç­–ç•¥ â†’ ç”¨æˆ¶ç¢ºèª
3. ç­–ç•¥åŸ·è¡Œ â†’ è¨˜éŒ„è¨Šè™Ÿ â†’ æ›´æ–°çµæœ
4. ç¸¾æ•ˆåˆ†æ â†’ æª¢æŸ¥ç›®æ¨™æ˜¯å¦é”æˆ
   â”œâ”€â”€ å·²é”æˆ â†’ ç¶­æŒç¾ç‹€
   â””â”€â”€ æœªé”æˆ â†’ LLM å¯©æŸ¥ â†’ å»ºè­°ä¿®æ”¹
5. ç”¨æˆ¶ç¢ºèªä¿®æ”¹ â†’ æ›´æ–°ç­–ç•¥
6. ç¹¼çºŒåŸ·è¡Œ â†’ å¾ªç’°ç›´åˆ°é”æˆç›®æ¨™
```

### LLM å»ºè­°é¡å‹

LLM å¯©æŸ¥å¾Œå¯èƒ½çµ¦å‡ºä»¥ä¸‹å»ºè­°ï¼š

| é¡å‹ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| åƒæ•¸èª¿æ•´ | ä¿®æ”¹åœæã€æ­¢ç›ˆã€æ•¸é‡ç­‰ | ã€Œåœæå¤ªè¿‘ï¼Œå»ºè­°å¾ 30 é»æ”¹ç‚º 50 é»ã€ |
| Prompt å¾®èª¿ | ä¿®æ”¹äº¤æ˜“é‚è¼¯æè¿° | ã€Œå»ºè­°åŠ å…¥ MACD ç¢ºèªè¨Šè™Ÿã€ |
| é‡æ–°è¨­è¨ˆ | å®Œå…¨é‡æ–°è¨­è¨ˆç­–ç•¥ | ã€Œ RSI ç­–ç•¥ä¸é©åˆç•¶å‰å¸‚å ´ã€ |

### è‡ªå‹• LLM Review æ”¯æ´è‡ªå‹•å®šæ™‚è§¸ç™¼æ’ç¨‹

ç³»çµ± LLM å¯©æŸ¥ï¼Œç„¡éœ€æ‰‹å‹•è¼¸å…¥å‘½ä»¤ï¼š

```yaml
auto_review:
  enabled: true
  schedules:
    - strategy_id: "strategy_001"
      period: 5
      unit: "day"      # æ¯ 5 å¤©è§¸ç™¼ä¸€æ¬¡
    - strategy_id: "strategy_002"
      period: 2
      unit: "week"     # æ¯ 2 é€±è§¸ç™¼ä¸€æ¬¡
```

**è¦å‰‡**ï¼š
- æ¯å¤©æ¯ç­–ç•¥æœ€å¤šè§¸ç™¼ 1 æ¬¡
- æ‰‹å‹• `review` å‘½ä»¤ä¸å—é™åˆ¶
- ç„¡ goal ç­–ç•¥æœƒè·³é

## å°ˆæ¡ˆçµæ§‹

```
AISOTS/
â”œâ”€â”€ main.py                 # å…¥å£ç¨‹å¼
â”œâ”€â”€ config.yaml            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # Python ä¾è³´
â”œâ”€â”€ AGENTS.md             # Agent é–‹ç™¼æŒ‡å—
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              # Shioaji API åŒ…è£
â”‚   â”‚   â”œâ”€â”€ shioaji_client.py
â”‚   â”‚   â”œâ”€â”€ connection.py
â”‚   â”‚   â””â”€â”€ order_callback.py
â”‚   â”‚
â”‚   â”œâ”€â”€ trading/          # äº¤æ˜“é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ strategy.py
â”‚   â”‚   â”œâ”€â”€ strategy_manager.py
â”‚   â”‚   â”œâ”€â”€ position.py
â”‚   â”‚   â”œâ”€â”€ position_manager.py
â”‚   â”‚   â”œâ”€â”€ order.py
â”‚   â”‚   â””â”€â”€ order_manager.py
â”‚   â”‚
â”‚   â”œâ”€â”€ engine/           # ç­–ç•¥å¼•æ“
â”‚   â”‚   â”œâ”€â”€ framework.py       # ç­–ç•¥æ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ llm_generator.py  # LLM ç­–ç•¥ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ runner.py         # ç­–ç•¥åŸ·è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ rule_engine.py   # è¦å‰‡å¼•æ“
â”‚   â”‚   â””â”€â”€ rule_parser.py   # è¦å‰‡è§£æå™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ analysis/          # ç¸¾æ•ˆåˆ†ææ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ signal_recorder.py    # è¨Šè™Ÿè¨˜éŒ„å™¨
â”‚   â”‚   â”œâ”€â”€ performance_analyzer.py # ç¸¾æ•ˆåˆ†æå™¨
â”‚   â”‚   â””â”€â”€ strategy_reviewer.py  # LLM ç­–ç•¥å¯©æŸ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ agent/            # AI Agent
â”‚   â”‚   â”œâ”€â”€ tools.py          # äº¤æ˜“å·¥å…·
â”‚   â”‚   â”œâ”€â”€ prompts.py       # æç¤ºè©
â”‚   â”‚   â””â”€â”€ providers.py     # LLM æä¾›è€…
â”‚   â”‚
â”‚   â”œâ”€â”€ market/           # å¸‚å ´æ•¸æ“š
â”‚   â”‚   â”œâ”€â”€ data_service.py
â”‚   â”‚   â””â”€â”€ price_cache.py
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/          # è³‡æ–™å„²å­˜
â”‚   â”‚   â”œâ”€â”€ json_store.py
â”‚   â”‚   â””â”€â”€ models.py
â”‚   â”‚
â”‚   â”œâ”€â”€ risk/            # é¢¨æ§ç®¡ç†
â”‚   â”‚   â””â”€â”€ risk_manager.py
â”‚   â”‚
â”‚   â”œâ”€â”€ notify/          # é€šçŸ¥ç³»çµ±
â”‚   â”‚   â””â”€â”€ telegram.py  # Telegram é€šçŸ¥ + Bot
â”‚   â”‚
â”‚   â””â”€â”€ config.py        # é…ç½®è¼‰å…¥
â”‚
â”œâ”€â”€ documents/           # èªªæ˜æ–‡ä»¶
â”‚   â”œâ”€â”€ Features.md
â”‚   â”œâ”€â”€ System_Architecture.md
â”‚   â””â”€â”€ User_Manual.md
â”‚
â”œâ”€â”€ tests/               # æ¸¬è©¦æª”æ¡ˆ
â”‚   â””â”€â”€ test_trading.py
â”‚
â””â”€â”€ workspace/          # åŸ·è¡Œæ™‚è³‡æ–™
    â”œâ”€â”€ strategies.json   # ç­–ç•¥é…ç½®
    â”œâ”€â”€ positions.json   # éƒ¨ä½è¨˜éŒ„
    â”œâ”€â”€ orders.json     # è¨‚å–®è¨˜éŒ„
    â”œâ”€â”€ signals.json    # è¨Šè™Ÿè¨˜éŒ„
    â””â”€â”€ logs/
        â””â”€â”€ trading.log
```

## æŠ€è¡“

- Python 3.10+
- Shioaji API
- pandas_ta
- python-telegram-bot
- LLM (Ollama/OpenAI/Anthropic/DeepSeek)

## ç‰ˆæœ¬è³‡è¨Š

| ç‰ˆæœ¬ | èªªæ˜ |
|------|------|
| 1.0.0 | åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æ´3å€‹ç­–ç•¥ |
| 2.0.0 | æ–°å¢ LLM ç­–ç•¥ç”Ÿæˆå™¨èˆ‡ç­–ç•¥æ¡†æ¶ |
| 2.1.0 | æ–°å¢ Telegram Bot æ¥æ”¶æ©Ÿåˆ¶ |
| 3.0.0 | æ–°å¢è‡ªæˆ‘å„ªåŒ–ç³»çµ± - ç¬¬ä¸€éšæ®µ |
| 3.1.0 | æ–°å¢è‡ªæˆ‘å„ªåŒ–ç³»çµ± - ç¬¬äºŒéšæ®µ |
| 3.2.0 | æ–°å¢è‡ªæˆ‘å„ªåŒ–ç³»çµ± - ç¬¬ä¸‰éšæ®µ |
| 3.3.0 | æ–°å¢ç­–ç•¥ç¨‹å¼ç¢¼å…©éšæ®µé©—è­‰ï¼ˆLLMå¯©æŸ¥+æ­·å²Kæ£’å›æ¸¬ï¼‰|

## License

MIT
